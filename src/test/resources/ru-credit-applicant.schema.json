{
  "$id": "https://example.com/schemas/ru-credit-applicant.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Заявка на кредит (физическое лицо, РФ)",
  "description": "Схема описывает данные типового заемщика в РФ для заявки на кредит: идентификация (ФИО, ДР, гражданство, паспорт РФ), адреса, контакты, занятость/доходы, параметры кредита и согласия.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "full_name",
    "citizenship",
    "birth_date",
    "passport_rf",
    "addresses",
    "contacts",
    "employment",
    "income",
    "credit_application",
    "consents"
  ],
  "properties": {
    "full_name": {
      "type": "object",
      "additionalProperties": false,
      "required": ["last_name", "first_name"],
      "properties": {
        "last_name": {
          "type": "string",
          "minLength": 2,
          "maxLength": 60,
          "pattern": "^[А-ЯЁ][а-яё-]{1,59}$",
          "description": "Фамилия кириллицей, первая заглавная"
        },
        "first_name": {
          "type": "string",
          "minLength": 2,
          "maxLength": 60,
          "pattern": "^[А-ЯЁ][а-яё-]{1,59}$",
          "description": "Имя кириллицей, первая заглавная"
        },
        "middle_name": {
          "type": ["string", "null"],
          "minLength": 0,
          "maxLength": 60,
          "pattern": "^[А-ЯЁ][а-яё-]{1,59}$",
          "description": "Отчество (если есть), кириллицей"
        }
      },
      "examples": [
        { "last_name": "Иванов", "first_name": "Петр", "middle_name": "Сергеевич" }
      ]
    },
    "citizenship": {
      "type": "string",
      "const": "RU",
      "description": "Гражданство по ISO 3166-1 alpha-2",
      "examples": ["RU"]
    },
    "birth_date": {
      "type": "string",
      "format": "date",
      "formatMinimum": "1900-01-01",
      "formatMaximum": "2007-08-14",
      "description": "Дата рождения, заемщику должно быть 18+ на момент подачи"
    },
    "birth_place": {
      "type": "string",
      "minLength": 3,
      "maxLength": 120,
      "description": "Место рождения по паспорту",
      "examples": ["г. Москва"]
    },
    "snils": {
      "type": "string",
      "pattern": "^\\d{3}-\\d{3}-\\d{3} \\d{2}$",
      "description": "СНИЛС в формате 000-000-000 00",
      "examples": ["112-233-445 95"]
    },
    "inn": {
      "type": "string",
      "pattern": "^\\d{12}$",
      "description": "ИНН физлица (12 цифр)",
      "examples": ["503287946153"]
    },
    "passport_rf": {
      "type": "object",
      "additionalProperties": false,
      "required": ["series", "number", "issue_date", "issued_by", "unit_code"],
      "properties": {
        "series": {
          "type": "string",
          "pattern": "^\\d{4}$",
          "description": "Серия паспорта (4 цифры)",
          "examples": ["4510"]
        },
        "number": {
          "type": "string",
          "pattern": "^\\d{6}$",
          "description": "Номер паспорта (6 цифр)",
          "examples": ["742395"]
        },
        "issue_date": {
          "type": "string",
          "format": "date",
          "formatMinimum": "1997-10-01",
          "formatMaximum": "2025-08-14",
          "description": "Дата выдачи паспорта РФ"
        },
        "issued_by": {
          "type": "string",
          "minLength": 5,
          "maxLength": 160,
          "description": "Кем выдан (как в паспорте)",
          "examples": ["ГУ МВД РОССИИ ПО Г. МОСКВЕ"]
        },
        "unit_code": {
          "type": "string",
          "pattern": "^\\d{3}-\\d{3}$",
          "description": "Код подразделения (000-000)",
          "examples": ["780-213"]
        }
      }
    },
    "addresses": {
      "type": "object",
      "additionalProperties": false,
      "required": ["registration", "residence"],
      "properties": {
        "registration": { "$ref": "#/$defs/address_rf" },
        "residence": { "$ref": "#/$defs/address_rf" },
        "is_same_as_registration": {
          "type": "boolean",
          "description": "Флаг совпадения адреса проживания с регистрацией",
          "default": false
        }
      }
    },
    "contacts": {
      "type": "object",
      "additionalProperties": false,
      "required": ["mobile_phone"],
      "properties": {
        "mobile_phone": { "$ref": "#/$defs/phone_ru" },
        "home_phone": { "$ref": "#/$defs/phone_ru" },
        "work_phone": { "$ref": "#/$defs/phone_ru" },
        "email": { "$ref": "#/$defs/email" },
        "preferred_contact_time": {
          "type": "string",
          "enum": ["any", "morning", "day", "evening"],
          "default": "any"
        }
      }
    },
    "marital_status": {
      "type": "string",
      "enum": ["single", "married", "divorced", "widowed"],
      "description": "Семейное положение"
    },
    "dependents": {
      "type": "integer",
      "minimum": 0,
      "maximum": 10,
      "description": "Количество иждивенцев"
    },
    "education_level": {
      "type": "string",
      "enum": ["secondary", "secondary_vocational", "higher", "postgraduate"],
      "description": "Уровень образования"
    },
    "employment": {
      "type": "object",
      "additionalProperties": false,
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["employed", "self_employed", "unemployed", "retired", "student", "military"],
          "description": "Статус занятости"
        },
        "employer": { "$ref": "#/$defs/employer_info" },
        "work_experience_months": {
          "type": "integer",
          "minimum": 0,
          "maximum": 600,
          "description": "Трудовой стаж на текущем месте (мес.)"
        },
        "position": {
          "type": "string",
          "minLength": 2,
          "maxLength": 100,
          "description": "Должность",
          "examples": ["ведущий инженер"]
        }
      },
      "allOf": [
        {
          "if": { "properties": { "status": { "const": "employed" } } },
          "then": { "required": ["employer"] }
        }
      ]
    },
    "income": {
      "type": "object",
      "additionalProperties": false,
      "required": ["monthly_income_rub"],
      "properties": {
        "monthly_income_rub": {
          "type": "number",
          "minimum": 10000,
          "maximum": 10000000,
          "multipleOf": 1,
          "description": "Официальный ежемесячный доход, RUB"
        },
        "other_income_rub": {
          "type": "number",
          "minimum": 0,
          "maximum": 10000000,
          "multipleOf": 1,
          "default": 0,
          "description": "Прочие доходы, RUB"
        },
        "monthly_expenses_rub": {
          "type": "number",
          "minimum": 0,
          "maximum": 10000000,
          "multipleOf": 1,
          "description": "Ежемесячные расходы/обязательства, RUB"
        }
      }
    },
    "credit_application": {
      "type": "object",
      "additionalProperties": false,
      "required": ["product_type", "purpose", "requested_amount_rub", "term_months", "currency"],
      "properties": {
        "product_type": {
          "type": "string",
          "enum": ["consumer", "auto", "mortgage", "credit_card", "refinance"],
          "description": "Тип кредитного продукта"
        },
        "purpose": {
          "type": "string",
          "enum": ["goods", "services", "vehicle", "home", "refinance", "other"],
          "description": "Цель кредита"
        },
        "requested_amount_rub": {
          "type": "number",
          "minimum": 10000,
          "maximum": 50000000,
          "multipleOf": 1,
          "description": "Запрашиваемая сумма, RUB"
        },
        "term_months": {
          "type": "integer",
          "minimum": 3,
          "maximum": 360,
          "description": "Срок кредита в месяцах"
        },
        "currency": {
          "type": "string",
          "const": "RUB",
          "description": "Валюта кредита"
        },
        "collateral": {
          "type": "string",
          "enum": ["none", "vehicle", "real_estate", "deposit", "guarantee"],
          "default": "none",
          "description": "Обеспечение"
        }
      }
    },
    "consents": {
      "type": "object",
      "additionalProperties": false,
      "required": ["bureau_check", "personal_data_processing"],
      "properties": {
        "bureau_check": {
          "type": "boolean",
          "const": true,
          "description": "Согласие на запрос в БКИ"
        },
        "personal_data_processing": {
          "type": "boolean",
          "const": true,
          "description": "Согласие на обработку ПДн (152‑ФЗ)"
        },
        "bank_rules_ack": {
          "type": "boolean",
          "const": true,
          "description": "Подтверждение ознакомления с условиями банка"
        },
        "aml_cft_ack": {
          "type": "boolean",
          "description": "Подтверждение достоверности данных (115‑ФЗ)",
          "const": true
        }
      }
    }
  },
  "$defs": {
    "phone_ru": {
      "type": "string",
      "pattern": "^\\+7\\d{10}$",
      "description": "Телефон РФ в формате +7XXXXXXXXXX",
      "examples": ["+79217462853"]
    },
    "email": {
      "type": "string",
      "format": "email",
      "maxLength": 254,
      "examples": ["ivan.petrov@example.ru"]
    },
    "address_rf": {
      "type": "object",
      "additionalProperties": false,
      "required": ["postal_code", "region", "city", "street", "house"],
      "properties": {
        "postal_code": {
          "type": "string",
          "pattern": "^\\d{6}$",
          "description": "Почтовый индекс РФ (6 цифр)",
          "examples": ["101000"]
        },
        "region": {
          "type": "string",
          "minLength": 2,
          "maxLength": 80,
          "description": "Субъект РФ",
          "examples": ["г. Москва", "Московская область"]
        },
        "district": {
          "type": "string",
          "minLength": 0,
          "maxLength": 80,
          "description": "Район",
          "examples": ["ЦАО"]
        },
        "city": {
          "type": "string",
          "minLength": 1,
          "maxLength": 80,
          "description": "Населенный пункт",
          "examples": ["Москва", "Химки"]
        },
        "settlement": {
          "type": "string",
          "minLength": 0,
          "maxLength": 80,
          "description": "Поселение/село (если применимо)"
        },
        "street": {
          "type": "string",
          "minLength": 1,
          "maxLength": 120,
          "description": "Улица/проспект/проезд",
          "examples": ["ул. Тверская"]
        },
        "house": {
          "type": "string",
          "minLength": 1,
          "maxLength": 10,
          "pattern": "^[0-9А-Яа-яA-Za-z/-]{1,10}$",
          "description": "Дом",
          "examples": ["7", "7к1"]
        },
        "building": {
          "type": "string",
          "minLength": 1,
          "maxLength": 10,
          "pattern": "^[0-9А-Яа-яA-Za-z/-]{1,10}$",
          "description": "Корпус/строение",
          "examples": ["стр2"]
        },
        "apartment": {
          "type": "string",
          "minLength": 1,
          "maxLength": 10,
          "pattern": "^[0-9A-Za-z-]{1,10}$",
          "description": "Квартира/офис",
          "examples": ["15"]
        },
        "fias_id": {
          "type": "string",
          "pattern": "^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$",
          "description": "FIAS GUID (если есть)"
        }
      }
    },
    "employer_info": {
      "type": "object",
      "additionalProperties": false,
      "required": ["name", "inn"],
      "properties": {
        "name": {
          "type": "string",
          "minLength": 2,
          "maxLength": 160,
          "description": "Наименование работодателя",
          "examples": ["ООО \"Ромашка\""]
        },
        "inn": {
          "type": "string",
          "pattern": "^\\d{10}$",
          "description": "ИНН организации (10 цифр)",
          "examples": ["7812458790"]
        },
        "ogrn": {
          "type": "string",
          "pattern": "^\\d{13}$",
          "description": "ОГРН (13 цифр)",
          "examples": ["1027700132195"]
        },
        "phone": { "$ref": "#/$defs/phone_ru" },
        "address": { "$ref": "#/$defs/address_rf" }
      }
    }
  },
  "examples": [
    {
      "full_name": { "last_name": "Иванов", "first_name": "Петр", "middle_name": "Сергеевич" },
      "citizenship": "RU",
      "birth_date": "1987-09-23",
      "birth_place": "г. Санкт-Петербург",
      "snils": "112-233-445 95",
      "inn": "503287946153",
      "passport_rf": {
        "series": "4510",
        "number": "742395",
        "issue_date": "2018-06-20",
        "issued_by": "ГУ МВД РОССИИ ПО Г. МОСКВЕ",
        "unit_code": "780-213"
      },
      "addresses": {
        "registration": {
          "postal_code": "191186",
          "region": "г. Санкт-Петербург",
          "district": "Центральный",
          "city": "Санкт-Петербург",
          "street": "Невский проспект",
          "house": "28",
          "building": "литА",
          "apartment": "37",
          "fias_id": "8f1f0a2b-2d2e-4a1b-9c3f-4b6f8d0e1a2b"
        },
        "residence": {
          "postal_code": "191024",
          "region": "г. Санкт-Петербург",
          "city": "Санкт-Петербург",
          "street": "ул. Рубинштейна",
          "house": "15",
          "apartment": "15"
        },
        "is_same_as_registration": true
      },
      "contacts": {
        "mobile_phone": "+79217462853",
        "email": "alexey.serebrov@example.ru",
        "preferred_contact_time": "day"
      },
      "marital_status": "married",
      "dependents": 1,
      "education_level": "higher",
      "employment": {
        "status": "employed",
        "employer": {
          "name": "ООО \"Ромашка\"",
          "inn": "7812458790",
          "ogrn": "1027700132195",
          "phone": "+78126091234",
          "address": {
            "postal_code": "191025",
            "region": "г. Санкт-Петербург",
            "city": "Санкт-Петербург",
            "street": "Литейный проспект",
            "house": "10"
          }
        },
        "work_experience_months": 36,
        "position": "ведущий инженер"
      },
      "income": {
        "monthly_income_rub": 120000,
        "other_income_rub": 10000,
        "monthly_expenses_rub": 45000
      },
      "credit_application": {
        "product_type": "consumer",
        "purpose": "goods",
        "requested_amount_rub": 500000,
        "term_months": 36,
        "currency": "RUB",
        "collateral": "none"
      },
      "consents": {
        "bureau_check": true,
        "personal_data_processing": true,
        "bank_rules_ack": true,
        "aml_cft_ack": true
      }
    }
  ]
}
